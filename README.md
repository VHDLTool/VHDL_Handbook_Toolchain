# VHDLHandbook
Design and VHDL handbook for VLSI development

## Introduction

This handbook is a set of rules for VHDL code, with associated examples and figures. It is divided into two chapters :

- The first one is called the "Standard Rules" which includes general rules or recommendations that are common between all companies working with VHDL. These rules share a general agreement between companies originally involved. Addition and changes to these rules have to be agreed by everyone.

- The second one is called "Custom Rules" which includes specific company rules that are adapted/refined from standard rules or completely new. These custom rules allow third party companies to create their own version of the VHDL Handbook.

## Dependencies

To generate a PDF file from the sources, you will need the following software:

- [Eclipse IDE for Java](https://www.eclipse.org/downloads/) (we will be using Ant to build the PDF)

- [The Saxon XSLT and XQuery processor](http://saxon.sourceforge.net/)

- [Apache FOP](https://xmlgraphics.apache.org/fop/)
 
- [Docbook XSL Stylesheets](http://sourceforge.net/projects/docbook/files/docbook-xsl/)

## Project structure

The project is structured as follows :

- `build.xml` is the Ant building script

- `ant.properties` defines various parameters for the building process

- A `stylesheets` folder containing XSLT stylesheets to transform the XML rulesets

- A `src` folder containing:

    - The XSD folder, in which you will find the handbook schema (`handbook.xsd`) describing how a rule is structured
    
    - The different Ant scripts called from the `build.xml` one
    
    - The rulesets
    
    - An Extras folder, in which can be found :
    
        + The images to be inserted to illustrate rules (only SVG format)
        
        + The text from introduction, glossary and some release info
        
        + The VHDL examples

## Building

You may first modify your `ant.properties` according to your development environment (changing path of Saxon, FOP and the Docbook stylesheets) and put your handbook xml files (including an addtionnal xml to customize the revision of your pdf release) in the dedicated folder. You may also need to change the path of the Docbook stylesheets in the `stylesheets/convert2docbook.xsl` if needed.

### Project settings

#### Folders

| Parameter             | Description                                                                           |
|-----------------------|---------------------------------------------------------------------------------------|
| folder.src            | Source folder, containing scripts, rulesets, stylesheets and extras                   |
| folder.out            | Output folder, containing PDF output                                                  |
| folder.out.temp       | Temporary folder, containing temporary files generated by scripts                     |
| folder.scripts        | Scripts folder, containing all the Ant scripts called from `build.xml`                |
| folder.stylesheet     | Stylesheets folder, containing all the XSLT scripts                                   |
| folder.vhdl           | Folder containing VHDL examples                                                       |
| folder.text           | Folder containing texts from introduction, glossary and release info                  |
| folder.images         | Folder containing the rules' illustrations                                            |
| folder.ruleset        | Folder containing the rulesets XML files                                              |
| folder.src.rulesets   | Folder containing the rulesets XML files, seen from the `build.merge.xml` script      |
| docbook.xsl.dir	| Folder containing the Docbook stylesheets                                             |
| saxon.lib.dir         | Folder containing Saxon                                                               |
| fop.home              | Folder containing FOP                                                                 |

#### Configuration parameters

| Parameter                        | Description                                                            |
|----------------------------------|------------------------------------------------------------------------|
| file.export_std_rules_pdf        | Set to True to include Standard ruleset inside the generated PDF       |
| file.export_custom_rules_pdf     | Set to True to include Custom ruleset inside the generated PDF         |

#### Input files

| Parameter             | Description                                                                           |
|-----------------------|---------------------------------------------------------------------------------------|
| file.main_name        | Input file name: a handbook header (contains one RuleSetHist for PDF release)         |

#### Generated files

| Parameter             | Description                                                                           |
|-----------------------|---------------------------------------------------------------------------------------|
| file.handbookPDF_name | Name of the generated PDF                                                             |
| file.subtitle_edition | Indicates (as subtitle in the PDF) the type of handbook release (standard, custom...) |

### Ant Build

If this is the first time you want to build the project, select `build.xml`, run as *2 Ant Build*, and click on *Run*. Otherwise, just run as *1 Ant Build*.

## Handbook rules

The rules are described by a set of XML tags according to the `handbook.xsd` schema.

A rule has the following template :

```XML
<hb:Rule UID="LLL_DDD">
	<hb:RuleUID>LLL_DDDDD</hb:RuleUID>
	<hb:RuleHist>
		<hb:Status>Status</hb:Status>
		<hb:Version>X</hb:Version>
		<hb:Creation>YYYY-MM-DD</hb:Creation>
		<hb:Modified>YYYY-MM-DD</hb:Modified>
		<hb:Revision>
			V1 : YYYY-MM-DD : Creation
			V2 : YYYY-MM-DD : CatModified1 ; CatModified2
            		V3 : YYYY-MM-DD : CatModified3
        	</hb:Revision>
	</hb:RuleHist>
	<hb:RuleContent>
		<hb:Name>Rule name</hb:Name>
		<hb:IsParent>false</hb:IsParent>
		<hb:IsSon>false</hb:IsSon>
		<hb:ParentUID xsi:nil="true" />
		<hb:Technology>Technology</hb:Technology>
		<hb:ApplicationFields>ApplicationFields</hb:ApplicationFields>
		<hb:Category>Category</hb:Category>
		<hb:SubCategory>SubCategory</hb:SubCategory>
		<hb:Severity>Severity</hb:Severity>
		<hb:Rationale>Some rationale related to the rule.</hb:Rationale>
		<hb:ShortDesc>A Short description of the rule.</hb:ShortDesc>
		<hb:LongDesc>A longer description in which you can do some formatting that will be kept</hb:LongDesc>
	</hb:RuleContent>
	<hb:RuleDesc>
		<hb:GoodExDesc>A description of the good example (leave empty if none needed)</hb:GoodExDesc>
		<hb:GoodExample>GoodExampleFileName</hb:GoodExample>
		<hb:BadExDesc>A description of the bad example (leave empty if none needed)</hb:BadExDesc>
		<hb:BadExample>BadExampleFileName</hb:BadExample>
		<hb:FigureDesc>A description of the figure illustrating the rule</hb:FigureDesc>
		<hb:Figure>TheFileNameOfTheFigure</hb:Figure>
	</hb:RuleDesc>
</hb:Rule>
```

## License

The handbook is published under the GNU GPLv3 license, available in the LICENSE file.
